## Авторизація користувачів

Авторизація користувачів в `FormLister` здійснюється з використанням контролера `Login`.

Авторизація може проходити по імені, email або іншому полю з облікового запису. Поле задається в параметрі `loginField`. Поле для авторизації має бути **унікальним** для кожного веб-користувача. Зазвичай для авторизації використовуються поля `username` або `email`.

Додаткове використання плагіна [userHelper](https://github.com/evolution-cms/evolution/blob/develop/assets/snippets/FormLister/snippet.FormLister.php) дозволяє:

* вести облік кількості логінів
* визначити час останньої авторизації
* реалізувати автологін або вихід з облікового запису

Перед використанням плагіна `userHelper` переконайтеся що він не відключений:

![Не забудьте включити userHelper](https://habrastorage.org/web/dbc/1e2/abd/dbc1e2abd8664a548f4eca254187fb60.png)

## Параметри контролера

### model
Клас для роботи з користувачами.

Можливі значення - ім'я класу.

Значення за замовчуванням - \modUsers

### modelPath
Шлях до файлу класу для роботи з користувачами.

Можливі значення - відносний шлях до файлу.

Значення за замовчуванням - assets/lib/MODxAPI/modUsers.php

### loginField
Поле, що містить ім'я користувача.

Можливі значення - ім'я поля.

Значення за замовчуванням - username.

### passwordField
Поле, що містить пароль користувача.

Можливі значення - ім'я поля.

Значення за замовчуванням - password.

### rememberField
Поле для запам'ятовування користувача. Якщо значення поля приводиться до true, то при успішній авторизації буде встановлена кука з параметрами автологіна. Ім'я куки і її час життя задаються параметрами cookieName і cookieLifetime.

Можна також задати поле rememberme в параметрі defaults, щоб запам'ятовування відбувалося без участі користувача:
```
&defaults=`{"rememberme":1}`
```

Можливі значення - ім'я поля.

Значення за замовчуванням - rememberme.

### checkActivation
Включає перевірку активації облікового запису користувача (див. "Активація облікових записів").

Можливі значення - 0 або 1.

Значення за замовчуванням - 1.

### context
Контекст авторизації.

Можливі значення - mgr або web.

Значення за замовчуванням - web.

### cookieName
Ім'я куки для зберігання параметрів автологіна.

Значення за замовчуванням - WebLoginPE.

### cookieLifetime
Час життя вищевказаної куки.

Можливі значення - число секунд з моменту останнього логіна.

Значення за замовчуванням - 157680000 (5 років).

### redirectTo
Перенаправляє користувача на сторінку з зазначеним id після авторизації.

Можливі значення - id цільової сторінки або масив.

Значення за замовчуванням - порожньо.

### exitTo
Перенаправляє вже авторизованого користувача на вказану статтю.

Можливі значення - id цільової сторінки або масив.

Значення за замовчуванням - порожньо.

### successTpl
Шаблон повідомлення про успішну авторизацію. В шаблоні можна використовувати дані користувача.

Можливі значення - ім'я шаблону, вказане за правилами завдання шаблонів в DocLister.

Значення за замовчуванням - запис з лексикону Login з ключем [+login.default_successTpl+]

### skipTpl
Шаблон повідомлення про те, що користувач вже авторизований.

Можливі значення - ім'я шаблону, вказане за правилами завдання шаблонів в DocLister.

Значення за замовчуванням - запис з лексикону Login з ключем [+login.default_skipTpl+]

## Параметры плагина userHelper
### logoutKey
Ім'я GET-параметра для запуску виходу з облікового запису. Якщо в посиланні на сторінку сайту вказано параметр з відповідним ім'ям (наприклад, http://sitename.ru/page.html?logout), буде проведений вихід з облікового запису.

Значення за замовчуванням - logout.

### cookieName
Ім'я куки для зберігання параметрів автологіна.

Значення за замовчуванням - WebLoginPE.

### cookieLifetime
Час життя вищевказаної куки.

Можливі значення - число секунд з моменту останнього логіна.

Значення за замовчуванням - 157680000 (5 років).
