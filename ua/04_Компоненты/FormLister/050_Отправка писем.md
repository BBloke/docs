## Надсилання листів

Контролер Form дозволяє відправляти дані форми в листі.

## Параметри відправки пошти
### parseMailerParams
Дозволяє використовувати дані форми в параметрах відправки пошти (&to=\`[+user.email.value+]\` и т.п.).

Можливі значення - 1, 0.

Значення за замовчуванням - 0.

### isHtml
Дозволяє відправляти лист у форматі html. Перевірка коректності коду листа покладається на розробника.

Можливі значення - 1, 0.

Значення за замовчуванням - 1.

### to
Адреса одержувача. Якщо не вказано, то лист не відправляється, але вважається успішно відправленим.

Можливі значення - email-адреса.

Значення за замовчуванням - порожньо.

### from
Можливі значення - email-адреса.

Значення за замовчуванням - параметр конфігурації emailsender.

### fromName
Ім'я відправника.

Можливе значення - рядок.

Значення за замовчуванням - параметр конфігурації site_name.

### replyTo
Заголовок replyTo.

Можливі значення - email-адреса.

Значення за замовчуванням - порожньо.

### cc
Заголовок сс.

Можливі значення - email-адреса.

Значення за замовчуванням - порожньо.

### bcc
Заголовок bcc.

Можливі значення - email-адреса.

Значення за замовчуванням - порожньо.

### noemail
Якщо параметр заданий, то лист не відправляється, але вважається успішно відправленим.

Можливі значення - 1, 0.

Значення за замовчуванням-0.

### ignoreMailerResult
Якщо параметр заданий, то лист відправляється, але результат відправки ігнорується.

Можливі значення - 1, 0.

Значення за замовчуванням-0.

### subject, ccSubject, autoSubject
Тема листа.

Можливі значення - рядок.

Значення за замовчуванням - порожньо.

### subjectTpl, ccSubjectTpl, autoSubjectTpl 
Шаблон теми листа.

Можливі значення - ім'я шаблону, вказане за правилами завдання шаблонів в DocLister.

Значення за замовчуванням - значення параметра subject (ccSubject, autoSubject).

### autosender
Адреса на який відправляється додатковий лист.

Можливі значення - email-адреса.

Значення за замовчуванням - порожньо.

### autosenderFromName
Ім'я відправника додаткового листа.

Можливі значення - рядок.

Значення за замовчуванням - параметр конфігурації site_name.

### ccSender
Якщо параметр заданий, то на адресу вказану в полі форми відправляється лист.

Можливі значення - 1, 0.

Значення за замовчуванням-0.

### ccSenderField
Ім'я поля, в якому зберігається адреса одержувача.

Можливі значення - ім'я поля форми.

Значення за замовчуванням - email.

### ccSenderFromName
Ім'я відправника листа на задану в полі форми адресу.

Можливі значення - рядок.

Значення за замовчуванням - не вказано.

## ccMailConfig
Дозволяє перевизначити параметри відправки для листів, що відправляються за адресою з форми (isHtml, from, fromName, subject, replyTo, cc, bcc, noemail).

Можливі значення - JSON або php масив.
 
Значення за замовчуванням - не вказано.

## autoMailConfig
Дозволяє перевизначити параметри відправки для додатково відправлених листів (isHtml, from, fromName, subject, replyTo, cc, bcc, noemail).

Можливі значення - JSON або php масив.
 
Значення за замовчуванням - не вказано.

## Захист від повторної відправки
### protectSubmit
Захист від повторної відправки листа.

Можливі значення - 1, 0 або список полів, за якими визначається унікальність листа. Якщо список не заданий, то використовуються поля, обов'язкові для заповнення.

Значення за замовчуванням-1.

### submitLimit
Захист від частої відправки листів.

Значення - число секунд між повторною відправкою.

Значення за замовчуванням - 60.

## Шаблони
### reportTpl
Основний шаблон листа.

Можливі значення - ім'я шаблону, вказане за правилами завдання шаблонів в DocLister.

Значення за замовчуванням - список полів і їх значень.

### automessageTpl
Шаблон додаткового листа.

Можливі значення - ім'я шаблону, вказане за правилами завдання шаблонів в DocLister.

Значення за замовчуванням - порожньо.

### ccSenderTpl
Шаблон листа на задану в полі форми адресу.

Можливі значення - ім'я шаблону, вказане за правилами завдання шаблонів в DocLister.

Значення за замовчуванням - порожньо.

### successTpl
Шаблон повідомлення про успішну відправку листів.

Можливі значення - ім'я шаблону, вказане за правилами завдання шаблонів в DocLister.

Значення за замовчуванням - порожньо.

## Надсилання файлів
### attachments
Імена полів, в яких зберігаються файли. Підтримуються тільки поля з одним файлом (name="field" type="file") і поля з одновимірним масивом файлів (name="field[]" type="file" multiple). 

Значення за замовчуванням - порожньо.

### attachFiles
Дозволяє відправити довільні файли. 

Можливі значення - масив:
```
&attachFiles=`{
"ім'я поля1":{
    "filepath":"assets/images/logo.png",
    "filename":"logo.png"
},
"ім'я поля2":[
    {
    "filepath":"assets/images/file1.jpg",
    "filename":"звіт.jpg"
    },
    {
    "filepath":"assets/images/file2.jpg",
    "filename":"звіт2.jpg"
    }
]
}`
```
### deleteAttachments
Дозволяє видалити файли вкладень після успішної відправки.

Можливі значення - 0 або 1.

Значення за замовчуванням-0.

### fileValidator
Ім'я класу для валідації файлів. Якщо задано, то клас повинен бути завантажений заздалегідь.

Значення за замовчуванням - \FormLister\FileValidator

### fileRules
Правила валідації (див.розділ "Валідація даних"). Стандартний валідатор підтримує правила:

- required: файли успішно відправлені;
- optional: аналогічно required, але виконується і в тому випадку, якщо користувач не завантажував файли (тобто поле з файлами не є обов'язковим);
- allowed: розширення файлу входить в заданий масив;
- images: розширення файлу jpg, jpeg, gif, png, bmp;
- minSize: розмір файлу в кілобайтах більше заданого;
- maxSize: розмір файлу в кілобайтах менше заданого;
- sizeBetween: розмір файлу в кілобайтах входить в діапазон;
- minCount: кількість файлів більше заданого;
- maxCount: кількість файлів менше заданого;
- countBetween: кількість файлів входить в діапазон.

Використовувати конструкцію "!ім'я поля" в правилах валідації файлів немає сенсу, так як значення поля з файлу не буде порожнім, навіть якщо файл не завантажений. Слід використовувати правило optional.

У шаблоні листа reportTpl доступний плейсхолдер [+attachments.value+] зі списком всіх доданих до листа файлів. Можна також вивести окремо: [+ім'я поля.value+]. Файли відправляються тільки в листі c шаблоном reportTpl.
