<p>Процес оновлення Evo складається з майже тих же самих кроків, що і процес установки. Але з одним серйозним винятком. А саме, при оновленні ви<em>не видаляєте і не перезаписуєте конфігураційний файл config.inc.php</em> на вашому сервері. Ці кроки такі:</p>
<ol>
  <li>
    <p>Якщо ви змінили будь-які сніпети або плагіни, що поставляються за замовчуванням, то або заздалегідь їх перейменуйте, або, коли в процесі роботи майстра установки ви доберетеся до кроку, на якому вас запитають, які сніпети і плагіни встановити, вимкніть відповідні їм прапорці. Справа в тому, що в процесі оновлення всі сніппети, що поставляються за замовчуванням, перезаписуються, щоб гарантувати наявність у вас їх останніх версій. Тому, якщо ви внесли якісь зміни в будь-який з фрагментів, що поставляються разом з ядром Evo, і не хочете, щоб в процесі оновлення стався його перезапис, то рекомендується зберегти цей сніпет під іншим ім'ям.</p>
  </li>
  <li>
    <p>Зробіть резервну копію вашого сайту. Для цього скачайте всі файли з сервера на ваш комп'ютер за допомогою FTP-клієнта, а потім за допомогою утиліти phpMyAdmin (або будь-якої іншої утиліти для роботи з базами даних) створіть дамп всієї бази даних, використовуваної вашим сайтом, і теж збережіть його на вашому комп'ютері.</p>
  </li>
  <li>
    <p>Переконайтеся, що ви все зберегли в резервнії копії! Так-так, серйозно!</p>
  </li>
  <li>
    <p>Скачайте і розпакуйте zip-архів з новою версією Evo.</p>
  </li>
  <li>
    <p>Завантажте вміст папки, яку ви розпакували з архіву, на сервер. При цьому всі старі файли слід просто перезаписати. Архів з дистрибутивом Evo не повинен містити конфігураційний файл config.inc.php в папці /manager/includes/, тому він не повинен перезаписати. Однак все-таки не буде зайвим перед завантаженням файлів на сервер перевірити, що конфігураційного файлу в дистрибутиві немає, а також переконатися, що ви зберегли ваш поточний конфігураційний файл config.inc.php в резервній копії (ви ж не забули створити резервну копію, так?).</p>
  </li>
  <li>
    <p>Тепер запустіть ваш веб-браузер і відкрийте index.php, що знаходиться в папці /install/.</p>
  </li>
  <li>
    <p>Дотримуйтесь кроків майстра установки. На цей раз, відразу ж після прийняття ліцензійної угоди слід вибрати опцію<strong><em>Оновити</em></strong>.</p>
    <div class="info">Зауваження: Якщо ваша версія MySQL старіша, ніж 4.1, виберіть опцію Розширене Оновлення та встановіть кодування, яке використовується при з'єднанні, як cp1251_koi8, так як в версіях MySQL до 4.1 єдине дозволене значення настройки charset_name &ndash; це cp1251_koi8. Додати нове кодування можна за допомогою редагування файлу sql/convert.cc в вихідному коді MySQL, так що використання інших кодувань теж можливе.</div>
  </li>
  <li>
    <p>Якщо ви видалили ваші старі файли замість того, щоб їх перезаписати, вам може знадобитися змінити права доступу до файлів і папок, зазначеним в <a href="documentation/getting-started/basic-installation">інструкції з установки</a>, щоб дозволити до них доступ для запису, проте, якщо в цьому виникне необхідність, майстер установки вам про це повідомить.</p>
  </li>
  <li>
    <p>На відповідному кроці майстра установки не забудьте відключити прапорці для тих ресурсів, які ви змінили, якщо ви їх не перейменували заздалегідь.</p>
  </li>
  <li>
    <p>Як тільки ви доберетеся до кроку майстра установки, де знаходиться прапорець, що пропонує видалити папку /install/, переконайтеся, що цей прапорець включений (це виключить повторний запуск процесу установки або оновлення ким-небудь іншим, хто може завдати шкоди вашому сайту).</p>
  </li>
  <li>
    <p>Після того, як ви завершили роботу майстра установки, знову зайдіть на ваш сервер через FTP і перевірте, що папка /install/ видалена. Якщо це не так, видаліть її вручну.</p>
  </li>
  <li>
    <p>Ну і нарешті, відновіть доступ тільки для читання у вашого конфігураційного файлу config.inc.php в папці /manager/includes/. Якщо ви заздалегідь записали значення прав доступу, встановіть його, або ж спробуйте встановити значення 444. Це<em>реально важливо</em>, так як це допоможе захистити ваш сайт від злому.</p>
  </li>
  <li>
    <p>Завершіть роботу майстра оновлення.</p>
  </li>
  <li>
    <p>Як тільки у вас все знову буде працювати, зайдіть в адмінку Evo і підправте імена ваших плагінів і сніпетів, якщо ви там щось міняли на кроці 1.</p>
  </li>
  <li>
    <p>Тепер все зроблено. Ви тільки що оновили Evo.</p>
  </li>
</ol>
<h3>Альтернативный спосіб</h3>
<p>При завантаженні нової версії Evo поверх старої у вас можуть залишитися старі файли, які більше не використовуються. Кожен з членів команди розробки Evo віддає перевагу своєму способу оновлення, який йому подобається, але тут буде наведений спосіб з мінімальним часом недоступності сайту:</p>
<ol>
  <li>
    <p>Скачайте всі файли з вашого сайта.</p>
  </li>
  <li>
    <p>Створіть резервну копію вашої бази даних.</p>
  </li>
  <li>
    <p>Взагалі, створіть резервну копію старої версії вашого сайту, щоб потім у разі потреби її можна було відновити.</p>
  </li>
  <li>
    <p>Створіть нову <strong>локальну</strong> папку і назвіть її, припустимо, EvoNew (або як вам більше подобається).</p>
  </li>
  <li>
    <p>Розпакуйте файли нової версії Evo в цю папку.</p>
  </li>
  <li>
    <p>З створеної вами резервної копії скопіюйте конфігураційний файл config.inc.php в папку /manager/includes/.</p>
  </li>
  <li>
    <p>Скопіюйте всі сніпети, модулі, плагіни та інші подібні компоненти, які вам потрібні або які ви змінили, в відповідні частини папки EvoNew.</p>
  </li>
  <li>
    <p>Скопіюйте всі зображення, файли css, файли шаблонів, документи тощо у відповідні частини папки EvoNew.</p>
  </li>
  <li>
    <p>Перейменуйте нові папки і файли в index.php-new, /manager-new/ і /assets-new/. Папку /install/ НЕ перейменовуйте. Завантажте на сервер ці папки (в тому числі папку /install/) і файл index.php-new. Це займе певний час.</p>
  </li>
  <li>
    <p>Тепер перейменуйте вже існуючі на вашому сайті файли і папки в index.php-old, /manager-old/ і /assets-old/.</p>
  </li>
  <li>
    <p>Починаючи з цього моменту, ваш сайт не працює.</p>
  </li>
  <li>
    <p>Перейменуйте нові папки і файли в index.php, /manager/ і /assets/.</p>
  </li>
  <li>
    <p>Запустіть з вашого браузера скрипт yoursite.com/install, після чого виберіть опцію Відновити. Подробиці дивіться в <a href="documentation/getting-started/basic-installation">інструкції з установки</a>.</p>
    <div class="info">Зауваження: Якщо ваша версія MySQL старіша, ніж 4.1, виберіть опцію Розширене Оновлення та встановіть кодування, яке використовується при з'єднанні, як cp1251_koi8, так як в версіях MySQL до 4.1 єдине дозволене значення настройки charset_name &ndash; это cp1251_koi8. Додати нове кодування можна за допомогою редагування файлу sql/convert.cc в вихідному коді MySQL, так що використання інших кодувань теж можливо.</div>
  </li>
  <li>
    <p>Починаючи з цього моменту, ваш сайт повинен знову працювати. Якщо ж він не працює, перейменуйте папки назад!</p>
  </li>
  <li>
    <p>Якщо ви все зробили правильно, тепер можна видалити всі папки з -old.</p>
  </li>
  <li>
    <p>Вам також слід зробити локальну резервну копію старої версії сайту і локальну резервну копію нової версії сайту.</p>
  </li>
</ol>
