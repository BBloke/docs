Автор: <a href="https://github.com/mnoskov/pagebuilder">mnoskov</a>

<img src="https://img.shields.io/badge/PHP-%3E=5.6-green.svg?php=5.6">

Плагін дозволяє розробнику визначити набір блоків з певною розміткою та списком полів, щоб контент-менеджер використовував ті блоки, які вважає за потрібне, зі своїм наповненням.

Після встановлення потрібно створити файли конфігурації, або перейменувати файли `*.php.sample` в `*.php`. На панелі адміністрування плагін додає нову вкладку на сторінці редагування ресурсу. Для виведення результатів використовується сніппет `[[PageBuilder]]`.

Конфігурація блоків береться з папки `config`. Для створення нового блоку потрібно створити у цій папці файл `<имя конфига>.php`, який має повернути асоціативний масив. Для створення контейнера потрібно створити файл `container.<имя контейнера>.php`. Структура масиву така:

<table>
<tr><th>Ключ</th><th>Значення</th></tr>
<tr><td>title</td><td>Назва блоку, видиму менеджеру при заповненні</td></tr>
<tr><td>container</td><td>Ім'я контейнера (якщо кілька масив імен), в якому буде виводиться блок.</td></tr>
<tr>
<td>fields</td>
<td>
Асоціативний масив полів, у яких ключами є ідентифікатори полів, а значеннями - масиви опцій цих полів.

Можливі типи полів та опції наведені нижче.
</td>
</tr>
<tr><td>show_in_templates</td><td>Масив ідентифікаторів шаблонів, для яких доступні редагування та виведення блоків</td></tr>
<tr><td>hide_in_docs</td><td>Масив ідентифікаторів документів, для яких редагування та висновок недоступні</td></tr>
<tr><td>show_in_docs</td><td>Масив ідентифікаторів документів, для яких доступні редагування та виведення блоків.

Якщо цей параметр вказаний, то hide_in_docs не береться до уваги.

Якщо не вказано жодного з параметрів, що обмежують доступ, блоки будуть доступні у всіх документах.</td></tr>
<tr><td>order</td><td>Порядок сортування в секції додавання блоку або порядок сортування контейнерів (вкладок). Цей параметр не впливає на сортування самих блоків!</td></tr>
<tr>
<td>templates</td>
<td>

Асоціативний масив, що містить шаблон для ключа owner, а також шаблони для кожної групи полів.

Опис методів створення шаблонів дивіться <a href="01_%D0%A8%D0%B0%D0%B1%D0%BB%D0%BE%D0%BD%D1%8B.md">тут</a>.

</td>
</tr>
<tr><td>icon</td><td>
  
  Клас іконки, який виводитиметься в секції для додавання нового блоку, якщо в параметрах плагіна значення `&addType` встановлено в `icons`
  
Наприклад, якщо задати клас "fa fa-cogs", то в інтерфейс буде виведено наступне:
```html
<i class="fa fa-cogs"></i>
```

</td></tr>
<tr><td>image</td><td>
  
  Зображення, яке буде виводитися в секції для додавання нового блоку, якщо параметри плагіна значення `&addType` встановлено в `images`.
  
Зображення буде оброблено сниппетом `phpthumb` з параметром `w=80`

</td></tr>
<tr><td>prepare</td><td>Ім'я сніпету або функція, яка буде викликана перед виведенням даних. Наприклад:

```php
'prepare' => function(&$options, &$values) {
  ...
},
```

Параметри для функції та сніпета однакові: `options` - конфігурація контейнера, `values` - значення полів.</td></tr>
</table>
